<section class="chat-section-contaner">
    <div class="contact-info">
            <user-card [title]="contact.title" [subtitle]="contact.subtitle" [status]="contact.status"
                [avatar]="contact.avatar"></user-card>
        <div class="icon-container">
            <button mat-icon-button class="icon" (click)="makeAVideoCall()">
                <mat-icon>videocam</mat-icon>
            </button>
            <button mat-icon-button class="icon" (click)="makeACall()">
                <mat-icon>call</mat-icon>
            </button>
        </div>
    </div>
    <!--messages-section-->
    <div class="messages-section scroll" #messageSection>
        <div *ngFor="let message of messages">
            <chat-bubble *ngIf="message.type===0" [content]="message.content" [date]="message.date" [type]="message.type"
                [avatar]="userCard.avatar"></chat-bubble>
            <chat-bubble *ngIf="message.type===1" [content]="message.content" [date]="message.date" [type]="message.type"
                [avatar]="contact.avatar"></chat-bubble>
        </div>
    </div>
    <!--new message section-->
    <div class="new-message-section">
        <form action="" class="new-message-form" #sendMessageForm="ngForm">
            <button class="emoji-picker item1" mat-icon-button (click)="toggled = !toggled" [(emojiPickerIf)]="toggled"
                [emojiPickerDirection]="'bottom' || 'top' || 'left' || 'right'"
                (emojiPickerSelect)="handleSelection($event)">
                <mat-icon>sentiment_satisfied_alt</mat-icon>
            </button>
            <div class="item2">
                <textarea name="message" type="text" placeholder="Escribe un mensaje" required class="new-message-textarea" 
                [(ngModel)]="messageToSend" (keyup.enter)="handleSubmit(sendMessageForm)"></textarea>
            </div>
            <div class="item3">
                <button mat-icon-button class="send-button" (click)="handleSubmit(sendMessageForm)">
                    <mat-icon>send</mat-icon>
                </button>
            </div>
        </form>
    </div>
</section>





<!-- Button trigger modal -->
<!-- <button type="button" id="launch-modal" class="btn btn-primary" data-toggle="modal" data-target="#callDenegated">
    call denegated
</button> -->

<!-- Modal -->
<div class="modal fade" id="callDenegated" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">Connection refused</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
              User is busy in this moment ðŸ˜“.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="closeConnection()">Close</button>
                <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
            </div>
        </div>
    </div>
</div>